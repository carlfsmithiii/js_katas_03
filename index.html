<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Adding content with document.createElement</title>
    <style>
      .bar {background: gray; height: 20px; margin: 10px; color: white;}
      div {
          margin: 5px;
      }
    </style>
  </head>
  <body>
    <script>


        const sampleArray = [469, 755, 244, 245, 758, 450, 302, 20, 712, 71, 456, 21, 398, 339, 882, 848, 179, 535, 940, 472]; 

        // Output to document
        appendHeading("h1", "JavaScript Katas 3");
        appendKata1();
        appendKata2();
        appendKata3();
        appendKata4();
        appendKata5();
        appendKata6();
        appendKata7();
        appendKata8();
        appendKata9();
        appendKata10();
        appendKata11();
        appendKata12();
        appendKata13();
        appendKata14();
        appendKata15();
        appendKata16();
        appendKata17();
        appendKata18();
        appendKata19();
        appendKata20();
        appendKata21();
        appendKata22();
        appendKata23();


        // Utility functions

        function appendHeading(headingType, headingText) {
            const heading = document.createElement(headingType);
            heading.appendChild(document.createTextNode(headingText));
            document.body.appendChild(heading);
        }

        function getIncreasingRange(start, end, filter=(x=>x)) {
            return [...Array(1+end-start).keys()].map(v => start + v).filter(filter);
        }

        function getDecreasingRange(start, end, filter=(x => x)) {
            return getIncreasingRange(end, start, filter).reverse();
        }

        function appendLoopedParagraph(from, to, filter=(x => x)) {
            const isIncrementDirectionUp = (from <= to) ? true : false;
            const paragraph = document.createElement("p");
            if (isIncrementDirectionUp) {
                getIncreasingRange(from, to, filter).forEach(i => paragraph.appendChild(document.createTextNode(i + ", ")));
                removeTrailingCommaFromParagraph(paragraph);
            } else {
                getDecreasingRange(from, to, filter).forEach(i => paragraph.appendChild(document.createTextNode(i + ", ")));
                removeTrailingCommaFromParagraph(paragraph);
            }
            document.body.appendChild(paragraph);
        }

        function getIncreasingSquares(upperLimit) {
            return getIncreasingRange(1, Math.floor(Math.sqrt(upperLimit))).map(x => x * x);
        }

        function getDecreasingSquares(upperLimit) {
            return getDecreasingRange(Math.floor(Math.sqrt(upperLimit)), 1).map(x => x * x);
        }

        function appendEditedSampleArray(array) {
            const paragraph = document.createElement("p");
            array.forEach(element => paragraph.appendChild(document.createTextNode(element + ", ")));
            removeTrailingCommaFromParagraph(paragraph); 
            document.body.appendChild(paragraph);
        }

        function removeTrailingCommaFromParagraph(paragraph) {
            paragraph.textContent = paragraph.textContent.substring(0, paragraph.textContent.length - 2);
        }

        function sumArray(array) {
            return array.reduce((a, b) => a + b);
        }

        function appendSingleElement(element) {
            const paragraph = document.createElement("p");
            paragraph.appendChild(document.createTextNode(element));
            document.body.appendChild(paragraph); 
        }

        function appendRectangle(width, height, color) {
            const rectangle = document.createElement("div");
            rectangle.style.width = width;
            rectangle.style.height = height;
            rectangle.style.backgroundColor = color;
            document.body.appendChild(rectangle);
        }


        // Kata functions -- Output kata and solution to document.
        function appendKata1() {
            appendHeading('h2', "1) Display the Number from 1 to 20");
            appendLoopedParagraph(1, 20);
        }

        function appendKata2() {
            appendHeading('h2', "2) Display the even numbers from 1 to 20");
            appendLoopedParagraph(2, 20, (x => x % 2 === 0));
        }

        function appendKata3() {
            appendHeading('h2', "3) Display the odd numbers from 1 to 20");
            appendLoopedParagraph(1, 19, (x => x % 2 === 1));
        }
        
        function appendKata4() {
            appendHeading('h2', "4) Display the multiples of 5 up to 100");
            appendLoopedParagraph(1, 100, x => x % 5 === 0);
        }
        
        function appendKata5() {
            appendHeading('h2', "5) Display the square numbers up to 100");
            const paragraph = document.createElement("p");
            getIncreasingSquares(100).forEach(x => paragraph.appendChild(document.createTextNode(x + ", ")));
            removeTrailingCommaFromParagraph(paragraph);
            document.body.appendChild(paragraph);
        }
        
        function appendKata6() {
            appendHeading('h2', "6) Display the numbers counting backwards from 20 to 1");
            appendLoopedParagraph(20, 1);
        }
        
        function appendKata7() {
            appendHeading('h2', "7) Display the even numbers counting backwards from 20");
            appendLoopedParagraph(20, 1, (x => x % 2 === 0));
        }
        
        function appendKata8() {
            appendHeading('h2', "8) Display the odd numbers from 20 to 1, counting backwards");
            appendLoopedParagraph(20, 1, (x => x % 2 === 1));
        }
        
        function appendKata9() {
            appendHeading('h2', "9) Display the multiples of 5, counting down from 100");
            appendLoopedParagraph(100, 1, x => x % 5 === 0);
        }
        
        function appendKata10() {
            appendHeading('h2', "10) Display the square numbers, counting down from 100");
            const paragraph = document.createElement("p");
            getDecreasingSquares(100).forEach(x => paragraph.appendChild(document.createTextNode(x + ", ")));

            removeTrailingCommaFromParagraph(paragraph);
            document.body.appendChild(paragraph);
        }
        
        function appendKata11() {
            appendHeading('h2', "11) Display the 20 elements of sampleArray");
            appendEditedSampleArray(sampleArray);
        }
        
        function appendKata12() {
            appendHeading('h2', "12) Display all the even numbers contained in sampleArray");
            appendEditedSampleArray(sampleArray.filter(a => a % 2 === 0));
        }
        
        function appendKata13() {
            appendHeading('h2', "13) Display all the odd numbers contained in sampleArray");
            appendEditedSampleArray(sampleArray.filter(a => a % 2 === 1));
        }
        
        function appendKata14() {
            appendHeading('h2', "14) Display the square of each element in sampleArray");
            appendEditedSampleArray(sampleArray.map(a => a * a));
        }
        
        function appendKata15() {
            appendHeading('h2', "15) Display the sum of all the numbers from 1 to 20");
            const oneToTwenty = getIncreasingRange(1, 20);
            appendSingleElement(sumArray(oneToTwenty));
        }
        
        function appendKata16() {
            appendHeading('h2', "16) Display the sum of all the elements in sampleArray");
            appendSingleElement(sumArray(sampleArray));
        }
        
        function appendKata17() {
            appendHeading('h2', "17) Display the smallest element in sampleArray");
            appendSingleElement(Math.min(...sampleArray));
        }
        
        function appendKata18() {
            appendHeading('h2', "18) Display the largest element in sampleArray");
            appendSingleElement(Math.max(...sampleArray));
        }
        
        function appendKata19() {
            appendHeading('h2', "19) Display 20 solid gray rectangles, each 20px high and 100px wide");
            getIncreasingRange(1, 20).forEach(x => appendRectangle('100px', '20px', 'gray'));
        }
        
        function appendKata20() {
            appendHeading('h2', "20) Display 20 solid gray rectangles, each 20px high, with widths ranging evenly from 105px to 200px");
            const widths = getIncreasingRange(1, 20).map(x => 100 + 5 * x);
            widths.forEach(width => appendRectangle(width + 'px', '20px', 'gray'));
        }
        
        function appendKata21() {
            appendHeading('h2', "21) Display 20 solid gray rectangles, each 20px high, with widths in pixels given by the 20 elements of sampleArray");
            const widths = sampleArray;
            widths.forEach(width => appendRectangle(width + 'px', '20px', 'gray'));
        }
        
        function appendKata22() {
            appendHeading('h2', "22) As in #21, but alternate colors so that every other rectangle is red");
            let isEveryOther = true;
            sampleArray.forEach(width => {
                let color = 'gray';
                if (isEveryOther) {
                    color = 'red';
                }
                isEveryOther = !isEveryOther;
                
                appendRectangle(width + 'px', '20px', color);
            });
        }
        
        function appendKata23() {
            appendHeading('h2', "23) As in #21, but color the rectangles with even widths red");
            sampleArray.forEach(width => {
                let color = 'gray';
                if (width % 2 ==0) {
                    color = 'red';
                }
                appendRectangle(width + 'px', '20px', color);
            });
        }

        
    
    </script>
  </body>
</html>